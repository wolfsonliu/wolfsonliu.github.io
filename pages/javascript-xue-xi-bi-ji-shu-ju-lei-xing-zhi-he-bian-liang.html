<!doctype html>
<html lang="zh" itemscope itemtype="http://schema.org/Person">
<head>
  <meta charset="utf-8">
  <!-- Site Meta Data -->
  <title>JavaScript 学习笔记：数据类型, 值和变量</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="Wolfson Liu">

  <link rel="shortcut icon" href="https://wolfsonliu.github.io/images/favicon.jpg">

  <!-- schema.org -->
  <meta itemprop="name" content="Wolf Cave">
  <meta itemprop="image" content="">
  <meta itemprop="description" content="">

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700' rel='stylesheet' type='text/css'>
  <!-- Style Meta Data -->
  <link rel="stylesheet" href="../theme/css/style.css" type="text/css" />
  <link rel="stylesheet" href="../theme/css/pygments.css" type="text/css" />

  <!-- Feed Meta Data -->

  <!-- Twitter Feed -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="">
  <meta name="twitter:image" content="">
</head>

<body>
  <!-- Sidebar -->
  <aside>
    <!--<center><a href=".."><img id="avatar" src=""></a></center>-->
    <h1>Wolf Cave</h1>
      <p>Nature Beauty Freedom</p>
    <br>


    <nav class="nav">
      <ul class="list-bare">
      
          <li><a class="nav__link" href="https://wolfsonliu.github.io/index.html">文章</a></li>
          <li><a class="nav__link" href="https://wolfsonliu.github.io/category/">类别</a></li>
          <li><a class="nav__link" href="https://wolfsonliu.github.io/tag/">标签</a></li>
          <li><a class="nav__link" href="https://wolfsonliu.github.io/about.html">关于</a></li>
         
        
      </ul>
    </nav>

    <p class="social">
        <a href="https://github.com/wolfsonliu" target="_blank" ><img src="../theme/images/icons/github.png"></a>
        <a href="https://www.douban.com/people/77536581/" target="_blank" ><img src="../theme/images/icons/douban.png"></a>
        <a href="https://ebird.org/ebird/profile/NDY3ODYz" target="_blank" ><img src="../theme/images/icons/ebird.png"></a>
        <a href="https://zh.wikipedia.org/wiki/User:Wolfsonliu" target="_blank" ><img src="../theme/images/icons/wikipedia.png"></a>
    </p>



  </aside>

  <!-- Content -->
  <article>
<section id="content" class="body">
        
        <p>JavaScript 中数据类型可以分为基本类型 (primitive types) 和对象类型 (object types).
这两种类型还可以进一步被分为有方法 (method) 的和无方法的.</p>
<p>JavaScript 的基本类型主要包括: 数字类型, 字符串类型, 布尔类型 (true false).
另外, <code>null</code> 和 <code>undefined</code> 是特殊的基本值, 某种程度上也可以各自是单独的基本类型.</p>
<p>而不是 JavaScript 的基本类型 (包括 <code>null</code> 和 <code>undefined</code>) 的值都是一个对象.
一个对象是由若干属性构成的, 每个属性都有自己的变量名和值 (可以是基本类型的值, 也可以是一个对象).
一个对象往往是没有顺序的属性的集合, JavaScript 定义了数组 (array) 这种特殊的对象, 其值是有顺序的.
同时, 在 JavaScript 中, 函数 (function) 也是一类特殊的对象, 其属性包括可以被执行的代码.</p>
<p>数据类型还能被分成可变类型 (mutable) 和不可变类型 (immutable).
对象类型和数组类型是可变的, 而字符串类型, 数字类型, 布尔类型, <code>null</code>, <code>undefined</code> 都是不可变的.</p>
<p>JavaScript 的变量 (variable) 是没有类型的限制的, 可以把不同的类型的值赋给同一个变量.
变量的声名需要使用 <code>var</code> 来指示, 如 <code>var x = 1;</code>.
变量是有其词法域 (lexical scope) 的, 有全局变量和局部变量, 例如在函数中定义的变量的词法域就在函数内部.</p>
<h3>数字类型</h3>
<p>在 JavaScript 中, 数字类型中的整数和浮点数是没有明确的区分的, 所有的数值都被按照浮点数来存储和表示.
JavaScript 使用 64 位的浮点数来存储数值, 数值大小在 ±1.7976931348623157e308 和 ±5e−324 之间.</p>
<p>JavaScript 默认是以 10 为底来表示数字, 对于十六进制的数字可以表示为以 <code>0x</code> 开头,
如 <code>0xff</code> 为十进制的 255, 对于八进制的数字可以表示为以 <code>0</code> 开头, 如 <code>0377</code> 为十进制的 255.</p>
<p>数字类型有若干的转换为字符串的函数.</p>
<p>转换为不同的底数.</p>
<div class="highlight"><pre><span></span><code><span class="err">var n = 17;</span>
<span class="err">n.toString(); // 默认为以 10 为底</span>
<span class="err">// &#39;17&#39;</span>
<span class="err">n.toString(2); // 以 2 为底</span>
<span class="err">// &#39;10001&#39;</span>
</code></pre></div>


<p>转换小数点和表示等.</p>
<div class="highlight"><pre><span></span><code><span class="err">var m = 1234.5678;</span>
<span class="err">m.toFixed(0);</span>
<span class="err">// &#39;1235&#39;</span>
<span class="err">m.toFixed(2);</span>
<span class="err">// &#39;1234.57&#39;</span>
<span class="err">m.toExponential(1);</span>
<span class="err">// &#39;1.2e+3&#39;</span>
<span class="err">m.toExponential(4);</span>
<span class="err">// &#39;1.2346e+3&#39;</span>
<span class="err">m.toPrecision(4);</span>
<span class="err">// &#39;1235&#39;</span>
<span class="err">m.toPrecision(8);</span>
<span class="err">// &#39;1234.5678&#39;</span>
</code></pre></div>


<h3>字符串类型</h3>
<p>JavaScript 的字符串是不可改变的, 字符串由 Unicode 字符构成, 每个字符长度为 16 个字 (bit), 字符串的长度就是 16-bit 的个数.
字符串是用单引号或者双引号来包围, 如果用单引号包围,
则可以在字符串中加入双引号, 反之亦然.
对于 HTML 也可以用两种引号来表示字符串,
因为 HTML 里面可能会有 JavaScript 代码,
而 JavaScript 中也会包括 HTML 代码,
所以一个好的建议是在 HTML 和 JavaScript 中分别使用不同的引号.
虽然 JavaScript 的字符串不可变更, 但是可以获取其特定位置的字符,
JavaScript 的字符串的字符是从 0 开始计数, 第一位的索引为 0.</p>
<div class="highlight"><pre><span></span><code><span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
<span class="nx">x</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
<span class="c1">// 3</span>
</code></pre></div>


<p>使用字符串的属性 length, str.length 可以获得字符串的长度.
需要注意的是, 有的字符在 UTF-16 中是用两个字符去编码的, 这个时候长度就是 2 而不是 1.</p>
<p>在 JavaScript 中使用 '\' 来转义字符, 如 '\n' 代表的是新行.</p>
<p>字符串相关的计算如下:</p>
<p>'+' 可以用于连接两个字符串, 返回一个新的字符串.</p>
<div class="highlight"><pre><span></span><code><span class="err">var s = &#39;hello, world&#39;;</span>
<span class="err">s + &#39;, ya&#39;;</span>
<span class="err">// &#39;hello, world, ya&#39;</span>
</code></pre></div>


<p>获取特定位置的字符.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.charAt(0); // 第 0 个字符</span>
<span class="err">// &#39;h&#39;</span>
<span class="err">s.charAt(s.length-1); // 最后一个字符</span>
<span class="err">// &#39;d&#39;</span>
<span class="err">s[0];</span>
<span class="err">// &#39;h&#39;</span>
</code></pre></div>


<p>获取子字符串.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.substring(1, 4); // 获取第 1, 2, 3 个字符</span>
<span class="err">// &#39;ell&#39;</span>
<span class="err">s.slice(1, 4);</span>
<span class="err">// &#39;ell&#39;</span>
<span class="err">s.slice(-3); // 获取最后三个字符</span>
<span class="err">// &#39;rld&#39;</span>
</code></pre></div>


<p>获取字符所在字符串的位置.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.indexOf(&#39;o&#39;); // 第一个 &#39;o&#39; 所在位置</span>
<span class="err">// 4</span>
<span class="err">s.lastIndexOf(&#39;o&#39;); // 最后一个 &#39;o&#39; 所在的位置</span>
<span class="err">// 8</span>
<span class="err">s.indexOf(&#39;o&#39;, 5); // 在 5 或者之后第一个 &#39;o&#39; 所在的位置</span>
<span class="err">// 8</span>
</code></pre></div>


<p>分割字符串.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.split(&#39;, &#39;);</span>
<span class="err">// [ &#39;hello&#39;, &#39;world&#39; ]</span>
</code></pre></div>


<p>替换字符.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.replace(&#39;h&#39;, &#39;H&#39;);</span>
<span class="err">// &#39;Hello, world&#39;</span>
</code></pre></div>


<p>转换字符大小写.</p>
<div class="highlight"><pre><span></span><code><span class="err">s.toUpperCase();</span>
<span class="err">// &#39;HELLO, WORLD&#39;</span>
<span class="err">s.toUpperCase().toLowerCase();</span>
<span class="err">// &#39;hello, world&#39;</span>
</code></pre></div>


<h3>正则表达式类型</h3>
<p>JavaScript 的正则表达式由两个 '/' 标记.
而第二斜线后面可以跟字母表示特别含义, 如 i 代表大小写敏感.</p>
<div class="highlight"><pre><span></span><code><span class="err">/^HTML/ // 在字符串的开头匹配 HTML 四个字母, ^ 表示开头</span>
<span class="err">/\bjavascript\b/i // 大小写敏感匹配 javascript 单词, \b 代表空格</span>
</code></pre></div>


<p>正则表达式变量具有一些用于匹配的方法.</p>
<div class="highlight"><pre><span></span><code><span class="err">var text = &#39;test: 1, 2, 3&#39;;</span>
<span class="err">var pattern = /\d+/g;</span>
<span class="err">pattern.test(text); // 判断字符串是否可以匹配正则表达式</span>
<span class="err">// true</span>
<span class="err">text.search(pattern); // 返回匹配的第一个位置</span>
<span class="err">// 6</span>
<span class="err">text.replace(pattern, &#39;#&#39;); // 替换匹配的值</span>
<span class="err">// &#39;test: #, #, #&#39;</span>
<span class="err">text.match(pattern); // 返回包含所有的匹配的array</span>
<span class="err">// [ &#39;1&#39;, &#39;2&#39;, &#39;3&#39; ]</span>
</code></pre></div>


<h3>布尔类型</h3>
<p>布尔类型的值就是 true 和 false.
在 JavaScript 中, undefined, null, 0, -0, NaN, ''(空字符串)
都被认为是 false 的, 出这些外都认为是 true 的.</p>
<p>布尔值可以转换为字符串或者数字, true 为 1, false 为 0.</p>
<div class="highlight"><pre><span></span><code><span class="err">var bool = true;</span>
<span class="err">bool.toString();</span>
<span class="err">// &#39;true&#39;</span>
<span class="err">bool + 2</span>
<span class="err">// 3</span>
</code></pre></div>


<p>&amp;&amp; 是布尔值的与运算符, || 是布尔值的或运算符号, ! 是布尔值的非运算符号.</p>
<div class="highlight"><pre><span></span><code><span class="n">true</span> <span class="o">&amp;&amp;</span> <span class="n">true</span><span class="p">;</span>
<span class="o">//</span> <span class="n">true</span>
<span class="n">true</span> <span class="o">||</span> <span class="n">false</span><span class="p">;</span>
<span class="o">//</span> <span class="n">true</span>
<span class="sx">!false</span>
<span class="o">//</span> <span class="n">true</span>
</code></pre></div>


<h3>null 和 undefined</h3>
<p>null 代表没有值, 而 undefined 代表没有定义.
从某种程度上可以理解为, null 为程序上的没有值,
而 undefined 则是系统层面的没有定义.</p>
<div class="highlight"><pre><span></span><code><span class="err">null == undefined</span>
<span class="err">// true</span>
</code></pre></div>


<h3>对象类型</h3>
<p>JavaScript 的对象是一系列属性的集合.
其属性也是对象, 如果是函数, 则被成为方法.</p>
<p>与基本类型的重要区别在于, 对象类型的属性是可以改变的.
一个 array 中的每一个元素可以变成不同的值, 可以添加删除.</p>
<h3>封装对象类型</h3>
<p>对于字符串, 其本身是一种类型, 而不是对象, 所以理应不具有属性,
但是在运行的时候如果调用相应的方法,
则会利用 new String(s) 创建一个临时的 String 对象, 完成后即被抛弃.</p>
<div class="highlight"><pre><span></span><code><span class="err">var s = &#39;hello.world&#39;</span>
<span class="err">s.length // 临时创建的 String 对象具有 .length 属性</span>
<span class="err">// 12</span>
<span class="err">s.len = 4 // 临时创建的 String 对象被赋予值为 4 的 .len 属性</span>
<span class="err">// 4</span>
<span class="err">s.len // 因为上面临时创建的 String 对象被抛弃, 此处新创建的对象没有 .len 属性</span>
</code></pre></div>


<p>同样, 数字类型和布尔类型都有如此特性.
这类临时创建的类型被称为封装对象类型.</p>
<p>除了基本类型自动的转换为封装对象类型之外, 也可以显式地去转换.
可以使用相应的函数.</p>
<div class="highlight"><pre><span></span><code><span class="err">Number(&#39;3&#39;); // 得到 3</span>
<span class="err">String(false);</span>
<span class="err">Boolean([]);</span>
<span class="err">Object(&#39;3&#39;); // 得到 new Number(&#39;3&#39;)</span>
<span class="err">typeof Number(&#39;3&#39;);</span>
<span class="err">// &#39;number&#39;</span>
<span class="err">typeof Object(&#39;3&#39;);</span>
<span class="err">// &#39;object&#39;</span>
</code></pre></div>


<h3>类型转换</h3>
<p>对于基本类型, JavaScript 会有隐式类型转换.
如 0 和 '' 在条件判断的时候会被作为 false.
数字和字符串相加则会把数字转换为字符串.</p>
<div class="highlight"><pre><span></span><code><span class="err">false + 1</span>
<span class="err">// 1</span>
<span class="err">undefined + 1</span>
<span class="err">// NaN</span>
<span class="err">1 + &#39;e&#39;</span>
<span class="err">// &#39;1e&#39;</span>
</code></pre></div>


<p>数字可以利用封装对象类型的 toString 等函数, 在前面也有提及.</p>
<div class="highlight"><pre><span></span><code><span class="err">var m = 1234.5678;</span>
<span class="err">m.toString();</span>
<span class="err">// &#39;1234.5678&#39;</span>
<span class="err">m.toFixed(0);</span>
<span class="err">// &#39;1235&#39;</span>
</code></pre></div>


<p>使用 Number 函数把表示数字的字符串转换为数字则默认是转换为以 10 为底的整数或浮点数.
也可以使用 parse 等函数来转换数字.</p>
<div class="highlight"><pre><span></span><code><span class="err">Number(&#39;3e2&#39;);</span>
<span class="err">// 300</span>
<span class="err">Number(&#39;3 dogs&#39;);</span>
<span class="err">// NaN</span>
<span class="err">parseInt(&#39;3 dogs&#39;);</span>
<span class="err">// 3</span>
<span class="err">parseFloat(&#39;3.14 pi&#39;);</span>
<span class="err">// 3.14</span>
<span class="err">parseInt(&#39;3.14&#39;);</span>
<span class="err">// 3</span>
<span class="err">Number(&#39;0xFF&#39;)</span>
<span class="err">// 255</span>
<span class="err">parseInt(&#39;0xFF&#39;);</span>
<span class="err">// 255</span>
<span class="err">parseInt(&#39;1010&#39;, 2); // 二进制</span>
<span class="err">// 10</span>
<span class="err">parseInt(&#39;1010&#39;, 8); // 八进制</span>
<span class="err">// 520</span>
<span class="err">parseInt(&#39;0.1&#39;);</span>
<span class="err">// 0</span>
<span class="err">parseInt(&#39;.1&#39;); // 小数不能省略 0</span>
<span class="err">// NaN</span>
<span class="err">parseInt(&#39;$2.1&#39;); // 数字不能以其他符号开头</span>
<span class="err">// NaN</span>
</code></pre></div>


<p>对于对象类型, 其本身转换为基础类型都是转换为 true,
同时它们大多数都有定义相应的 toString 函数.
另外有的类型也有 valueOf 函数可以转换为基本类型.</p>
<div class="highlight"><pre><span></span><code><span class="err">[1, 2, 3].toString();</span>
<span class="err">// &#39;1,2,3&#39;</span>
<span class="err">/\d+/g.toString();</span>
<span class="err">// &#39;/\\d+/g&#39;</span>
<span class="err">var d = new Date(2010, 0, 1);</span>
<span class="err">d.valueOf()</span>
<span class="err">// 1262275200000</span>
</code></pre></div>


<p>对于一个对象类型, 如果其具有 toString 的方法则会使用 toString 把对象转换为字符串基本类型.
如果其没有 toString 的方法, 则去寻找其具有的 valueOf 方法把对象转换为相应基本类型,
然后把相应的基本类型转换为字符串.
如果都没有的话则报错 TypeError.
如果调用一个对象的 valueOf, 则类似, 如果有 valueOf 方法则返回 valueOf 的值,
如果没有则调用 toString, 否则则报错 TypeError.</p>
</section>
  </article>

  <!-- Footer -->
  <footer>
    <p>
      Blog powered by <a href="http://getpelican.com/">Pelican</a>, 
      which takes great advantage of <a href="http://python.org">Python</a>.
      Theme <a href="https://github.com/parbhat/pelican-blue">Pelican-Blue</a> by <a href="https://parbhatpuri.com/">@parbhat</a>.
    </p>
  </footer>


</body>
</html>